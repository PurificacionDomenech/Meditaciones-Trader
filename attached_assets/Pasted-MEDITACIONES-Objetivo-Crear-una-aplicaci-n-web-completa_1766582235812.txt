MEDITACIONES
Objetivo: Crear una aplicaciÃ³n web completa de meditaciones guiadas con narraciÃ³n por voz, sonidos ambientales y controles personalizables.

ğŸ¯ FUNCIONALIDADES PRINCIPALES
1. Sistema de Meditaciones Guiadas
Meditaciones Predefinidas:

CategorÃ­a "Viajes MÃ­sticos" con mÃºltiples meditaciones
Cada meditaciÃ³n incluye: tÃ­tulo, descripciÃ³n, duraciÃ³n, categorÃ­a y texto completo
Ejemplos: "Semilla del Todo" (12 min), "AtenciÃ³n Plena" (10 min)
Meditaciones Personalizadas:

Los usuarios pueden crear, editar y eliminar sus propias meditaciones
Formulario con campos: tÃ­tulo, descripciÃ³n, duraciÃ³n estimada, texto
Almacenamiento en localStorage
Interfaz con botones de editar/eliminar por meditaciÃ³n
2. Motor de NarraciÃ³n por Voz (Speech Synthesis)
CaracterÃ­sticas del narrador:

Usa Web Speech API (window.speechSynthesis)
DivisiÃ³n inteligente del texto por lÃ­neas y oraciones
Sistema de pausas configurables entre frases (1-10 segundos)
Pausas extra (+2 seg) en saltos de lÃ­nea dobles
Limpieza automÃ¡tica de texto (elimina corchetes [] y parÃ©ntesis ())
Controles de voz personalizables:

Velocidad: 0.5x - 1.5x (default: 0.75x)
Tono: 0.5 - 2.0 (default: 1.0)
Volumen: 0% - 100% (default: 90%)
Pausa entre frases: 1-10 segundos (default: 3s)
Selector de voces:

Filtrar voces en espaÃ±ol disponibles en el navegador
Agrupar por gÃ©nero: â™€ Femeninas, â™‚ Masculinas, âš¬ Otras
Mostrar nombre limpio y paÃ­s de cada voz (ej: "Laura - EspaÃ±a")
DetecciÃ³n automÃ¡tica de gÃ©nero por nombres conocidos
3. Sistema de Sonidos Ambientales
CategorÃ­as de sonidos (organizados en acordeones):

Orientales: campanas tibetanas (3 variantes), cuencos cantores (3 variantes), gong (2 variantes)
Naturales: agua, naturaleza, viento, lluvia, pÃ¡jaros, fuego, ocÃ©ano
Ritmo: metrÃ³nomo
GeneraciÃ³n de audio sintÃ©tico:

Usar Web Audio API (AudioContext, OscillatorNode, BiquadFilterNode)
Sonidos continuos: ruido blanco filtrado con LFO para variaciÃ³n
Sonidos periÃ³dicos: osciladores con envolvente de volumen
Control de volumen individual por sonido (slider 0-100%)
Sistema de Favoritos de sonidos:

Guardar combinaciones de sonidos activos con sus volÃºmenes
Cargar/eliminar presets guardados
Almacenamiento en localStorage
4. Controles de ReproducciÃ³n
Botones principales:
"Iniciar MeditaciÃ³n" / "Pausar" / "Reanudar"
"Detener" (cancela y resetea todo)
Estados visuales:
Indicador de meditaciÃ³n activa
Tarjetas con efecto glass y sombras doradas
Resaltado de la meditaciÃ³n seleccionada
5. Sistema de Favoritos de NarraciÃ³n
Guardar configuraciones completas: velocidad, tono, volumen, voz seleccionada, pausas
Interfaz para cargar/eliminar favoritos
Almacenamiento persistente en localStorage
6. Compatibilidad Android/MÃ³vil
Fixes especÃ­ficos:
Cancelar sÃ­ntesis previa antes de nueva reproducciÃ³n
Timeout de seguridad (15s) por segmento de voz
Delay de 50ms antes de speechSynthesis.speak()
Manejo de errores con reintento automÃ¡tico
ğŸ¨ DISEÃ‘O UI/UX
Layout Principal:
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚           Header (navegaciÃ³n)           â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ COLUMNA IZQ     â”‚   COLUMNA DERECHA     â”‚
â”‚ (420px fijo)    â”‚   (flexible)          â”‚
â”‚                 â”‚                       â”‚
â”‚ â€¢ MeditaciÃ³n    â”‚ â€¢ Controles NarraciÃ³n â”‚
â”‚   Actual        â”‚ â€¢ Sonidos Ambientales â”‚
â”‚ â€¢ Botones Play  â”‚                       â”‚
â”‚ â€¢ Lista Predef. â”‚                       â”‚
â”‚ â€¢ Crear Nueva   â”‚                       â”‚
â”‚ â€¢ Mis Guardadas â”‚                       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
Estilos TemÃ¡ticos:
Fondo: Gradiente violeta/pÃºrpura con overlay semitransparente
Tarjetas: Efecto glass (backdrop-blur, fondo rgba con alpha)
Textos dorados: Clase .gold-text con gradiente lineal
Sombras: Sombras doradas en hover (box-shadow con rgba oro)
TipografÃ­a:
TÃ­tulos: 'Cinzel', serif (uppercase, tracking amplio)
Cuerpo: Sans-serif, tamaÃ±os pequeÃ±os (text-xs, text-sm)
ğŸ› ï¸ STACK TÃ‰CNICO
Frontend:

React 18+ con TypeScript
shadcn/ui components: Dialog, Button, Input, Textarea, Slider, Switch, Select, Accordion
Wouter para routing
Lucide React para iconos
APIs del Navegador:

Web Speech API: SpeechSynthesisUtterance, speechSynthesis
Web Audio API: AudioContext, OscillatorNode, GainNode, BiquadFilterNode
Estado:

useState para controles locales
useRef para referencias de audio y sÃ­ntesis
useCallback para optimizar renders
useImperativeHandle para exponer mÃ©todos del componente de sonidos
Persistencia:

localStorage para meditaciones personalizadas
localStorage para favoritos de narraciÃ³n
localStorage para presets de sonidos
ğŸ“‹ ESTRUCTURA DE DATOS
interface Meditacion {
  titulo: string;
  categoria: string;
  duracion: string;
  descripcion: string;
  texto: string;
}
interface MeditacionPersonalizada extends Meditacion {
  id: string;
}
interface NarrationPreset {
  id: string;
  nombre: string;
  speed: number;
  pitch: number;
  volume: number;
  voiceURI: string;
  pauseBetweenPhrases: number;
  createdAt: number;
}
interface AmbientSound {
  id: string;
  nombre: string;
  icon: string;
  category: 'oriental' | 'natural' | 'rhythm';
}
interface SoundPreset {
  id: string;
  nombre: string;
  sounds: Record<string, { active: boolean; volume: number }>;
  createdAt: number;
}
âš™ï¸ FUNCIONES CLAVE
NarraciÃ³n:
cleanText(): Elimina [] y () del texto
speakMeditation():
Divide texto en segmentos (por lÃ­neas y oraciones)
Crea utterances con parÃ¡metros actuales
Aplica pausas configurables
Maneja ciclo de reproducciÃ³n recursivo
togglePlayPause(): Inicia/pausa/reanuda
stopMeditation(): Cancela todo y resetea
Sonidos:
OscillatorSound class:
MÃ©todos: start(), stop(), setVolume()
Sonidos especÃ­ficos: createWaterSound(), createBellsSound(), etc.
toggleSound(): Activa/desactiva sonido
changeVolume(): Ajusta volumen de sonido activo
Voces:
getVoiceGender(): Detecta gÃ©nero por nombre
getVoiceCountry(): Extrae paÃ­s de voz
getCleanVoiceName(): Limpia nombre tÃ©cnico
ğŸ”§ DETALLES DE IMPLEMENTACIÃ“N
SegmentaciÃ³n de texto:

// Dividir por lÃ­neas
const lines = cleanedText.split('\n');
// Por cada lÃ­nea, dividir en oraciones
sentences = line.split(/(?<=[.!?â€¦])\s+/);
// Detectar saltos de lÃ­nea para pausas extra
hasLineBreakAfter = (Ãºltima oraciÃ³n de lÃ­nea) && (no Ãºltima lÃ­nea)
Pausas dinÃ¡micas:

const pauseDuration = segment.hasLineBreakAfter 
  ? (pauseBetweenPhrases + 2) * 1000 
  : pauseBetweenPhrases * 1000;
await new Promise(resolve => setTimeout(resolve, pauseDuration));
GeneraciÃ³n de sonido de agua (ejemplo):

// Ruido blanco
const noiseBuffer = createNoiseBuffer();
noiseNode.buffer = noiseBuffer;
// Filtro pasabajos
filterNode.type = 'lowpass';
filterNode.frequency.value = 800;
// LFO para variaciÃ³n
lfo.frequency.value = 0.3;
lfo.connect(lfoGain).connect(filterNode.frequency);
ğŸ“± RESPONSIVE
Desktop: Grid de 2 columnas (420px fija + flexible)
Tablet/Mobile: Columnas apiladas verticalmente
Scrollbars personalizados en listas
Controles tÃ¡ctiles optimizados
âœ¨ EXTRAS
Toast notifications para feedback de usuario
Validaciones de campos requeridos
Manejo de errores robusto (fallbacks, reintentos)
Accesibilidad: labels, ARIA attributes, keyboard navigation
Animaciones suaves en transiciones de estado